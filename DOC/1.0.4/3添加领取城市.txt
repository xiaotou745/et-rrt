  USE RenRenDB
alter table dbo.ClienterTask add CityCode int NOT NULL DEFAULT(0)
--添加列注释
EXEC sys.sp_addextendedproperty @name=N'MS_Description',
  @value=N'领取城市' ,
  @level0type=N'SCHEMA',
  @level0name=N'dbo', 
  @level1type=N'TABLE',
  @level1name=N'ClienterTask', 
  @level2type=N'COLUMN',
  @level2name=N'CityCode'
GO

UPDATE  a
SET     a.citycode = k.citycode
FROM    ClienterTask a
        JOIN ( SELECT   b.taskid ,
                        b.CityCode
               FROM     TaskCityRelation b
                        JOIN PublicProvinceCity c ON b.CityCode = c.Code
                                                     AND c.Jibie = 3
             ) k ON a.TaskId = k.TaskId

GO
UPDATE  TaskCityRelation
SET     CityName = '全国'
WHERE   CityCode = -1